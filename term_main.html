<!DOCTYPE html>
<html>
    <head>
        <title>Termostat</title>
        <script>
      
        
        function daySchedule(placement){
        	var colorSelected="#fc6400";
        	var colorSelection="#fc0000";
        	var colorNotSelected="#00a3fc";        	
        	var colorNotSelection="#0800fc";
            var isPressed=false;
            var isSelected=false;
            var selBeg,selEnd;
            var myNode = document.getElementById(placement);
            if(myNode==null)
            	return;
        	this.setVal=function(val){
        		
        	}
			this.getVal=function(){
				return 128;        		
        	}
		    function dispaySelection(selBeg,selEnd,isSelected){	        	
	        	childNodes=myNode.childNodes;
	            i = childNodes.length;

	            while (i--) {
	                if (childNodes[i].getAttribute("class") == "button") {
	                	var button=childNodes[i];	                	
	                	var cur=parseInt(button.innerHTML);
	                	if((cur>=selBeg)&&(cur<=selEnd)){	                		
	                		button.style.backgroundColor = isSelected?colorSelection:colorNotSelection;
	                	}else{ //show default state
	                		button.style.backgroundColor = (button.value=="true")?colorSelected:colorNotSelected;
	                	}
	                	
	                }
	            }
	        }	    
	       	 function doSelection(selBeg,selEnd,isSelected){	 		 	
	         	childNodes=myNode.childNodes
	             i = childNodes.length;                    
	             while (i--) {    
	             	var button=childNodes[i];                    	
	             	var cur=parseInt(button.innerHTML);
                	if((cur>=selBeg)&&(cur<=selEnd))
                		button.value=isSelected;
                	button.style.backgroundColor = (button.value=="true")?colorSelected:colorNotSelected;
    	         }	         		 
	 	 		}
		    this.moveState=function(button) {
	        	if(isPressed){        		
	        		selEnd=parseInt(button.innerHTML);;
	        		if(selBeg<=selEnd)
	        			dispaySelection(selBeg,selEnd,isSelected);
	        		else
	        			dispaySelection(selEnd,selBeg,isSelected);
	        	}	        	
	        }			
	        this.keyDown=function (button) {
	        	 isPressed=true;        	         	 
	             if (button.value == 'false') {
	           	  isSelected=true;
	             }
	             else {            	  
	           	  isSelected=false;
	             }
	             selBeg=selEnd=parseInt(button.innerHTML);;
	             dispaySelection(selBeg,selEnd,isSelected);
	       	};
	        this.keyUp=function () {
	        	 if(isPressed){
        			 if(selBeg<=selEnd)
        			   doSelection(selBeg,selEnd,isSelected);
        			 else
        			   doSelection(selEnd,selBeg,isSelected);
        		 }
        		 isPressed=false;
	        };
	        
	        (function(obj){	      	 
			   	 for(var i=0;i<24;i++){
			   		 (function(i){
				       	 var button=document.createElement("button")
				       	 button.innerHTML = i;
				       	 button.setAttribute("class", "button");
				       	 button.addEventListener("mousedown", function(){ obj.keyDown(button); });
				         button.addEventListener("mouseenter", function(){ obj.moveState(button);});
				       	 button.value= false;
				       	 myNode.appendChild(button);
			   		 })(i);
			   	 }		   	 		   		
			   	 window.addEventListener('mouseup', function(event){obj.keyUp();});
	       	 })(this);
		   	
        }
        
        function init(){
        	new daySchedule("group");
        	new daySchedule("group1");
        	new daySchedule("group2");
        }
    	</script>    	
    <style>
  .button {    
    border: 1px solid black;
    color: black;       
    text-align: center;
    text-decoration: none;
    display: inline-block;
    font-size: 16px;
    cursor: pointer;
    float: left;
    width:32px
}
  #temper_cur {    
    display: inline-block;
    font-size: 32px;    
    float: left;    
    height:32px
}
  #temper_present {
   color: green;   
   display: inline-block;     
    font-size: 14px;    
    float: left;    
    height:14px
}
#temper_ansent {
	color: gray;	
	display: inline-block;
    font-size: 14px;    
    float: left;    
    height:14px        
}

    </style>
    </head>
    <body onload="init()">
        <h1>state</h1>    
        <div id="temper_cur" >25.1</div>
        <div >
	        <div id="temper_present" >27.1</div>
	        </br>	        
	        <div id="temper_ansent" >24.1</div>
        </div>                

		
        <div id="weekSchedule" >
        <h2>week schedule</h2>
        <hr>        
        <div id="group" ></div>
        </br></br>
        <div id="group1" ></div>
        </br></br>
        <div id="group2" ></div>
        </div>
		
    </body>
</html>
